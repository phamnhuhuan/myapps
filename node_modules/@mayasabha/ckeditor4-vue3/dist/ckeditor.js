/*! For license information please see ckeditor.js.LICENSE.txt */
/*!*
* @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md.
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):"object"==typeof exports?exports.CKEditor=e(require("vue")):t.CKEditor=e(t.Vue)}(self,(t=>(()=>{"use strict";var e={976:e=>{e.exports=t}},n={};function o(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};return(()=>{o.d(i,{default:()=>s});var t,e=o(976);function n(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function r(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}function a(e,n){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof e||e.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(t||(t=a.scriptLoader(e).then((function(t){return n&&n(t),t}))),t)}a.scriptLoader=function(e){return new Promise((function(o,i){!function(t,e,o){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof e&&(o=e,e={}),e=e||{},o=o||function(){},a.type=e.type||"text/javascript",a.charset=e.charset||"utf8",a.async=!("async"in e)||!!e.async,a.src=t,e.attrs&&function(t,e){for(var n in e)t.setAttribute(n,e[n])}(a,e.attrs),e.text&&(a.text=String(e.text)),("onload"in a?n:r)(a,o),a.onload||n(a,o),i.appendChild(a)}(e,(function(e){return t=void 0,e?i(e):window.CKEDITOR?void o(CKEDITOR):i(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))}))}))};const c={name:"ckeditor",render:function(){return(0,e.h)("div",{},[(0,e.h)(this.tagName)])},props:{modelValue:{type:String,default:""},type:{type:String,default:"classic",validator:function(t){return["classic","inline"].includes(t)}},editorUrl:{type:String,default:"https://cdn.ckeditor.com/4.17.2/standard-all/ckeditor.js"},config:{type:Object,default:function(){}},tagName:{type:String,default:"textarea"},readOnly:{type:Boolean,default:null},throttle:{type:Number,default:80}},mounted:function(){var t=this;a(this.editorUrl,(function(e){t.$emit("namespaceloaded",e)})).then((function(){if(!t.$_destroyed){var e=t.prepareConfig(),n="inline"===t.type?"inline":"replace",o=t.$el.firstElementChild;CKEDITOR[n](o,e)}})).catch((function(t){console.log("[ckeditor.js] Error while loading namespace from integrations package",t)}))},data:function(){return{readyEmitted:!1}},beforeDestroy:function(){this.instance&&this.instance.destroy(),this.$_destroyed=!0},watch:{modelValue:function(t){this.instance&&this.instance.getData()!==t&&this.instance.setData(t)},readOnly:function(t){this.instance&&this.instance.setReadOnly(t)}},methods:{prepareConfig:function(){var t=this,e=this.config||{};e.on=e.on||{},void 0===e.delayIfDetached&&(e.delayIfDetached=!0),null!==this.readOnly&&(e.readOnly=this.readOnly);var n=e.on.instanceReady;return e.on.instanceReady=function(e){t.instance=e.editor,t.$nextTick().then((function(){t.prepareComponentData(),n&&n(e)}))},e},prepareComponentData:function(){var t=this,e=this.modelValue;this.instance.fire("lockSnapshot"),this.instance.setData(e,{callback:function(){t.$_setUpEditorEvents();var n=t.instance.getData();e!==n?(t.readyEmitted||(t.$emit("ready",t.instance),t.readyEmitted=!0),t.$emit("update:modelValue",n)):t.readyEmitted||(t.$emit("ready",t.instance),t.readyEmitted=!0),t.instance.fire("unlockSnapshot")}})},$_setUpEditorEvents:function(){var t=this,e=this.instance,n=function(t,e){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){clearTimeout(n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];n=setTimeout(t.bind.apply(t,[o].concat(r)),e)}}((function(n){var o=e.getData();t.modelValue!==o&&t.$emit("update:modelValue",o,n,e)}),this.throttle);e.on("change",n),e.on("focus",(function(n){t.$emit("focus",n,e)})),e.on("blur",(function(n){t.$emit("blur",n,e)}))}}};const s={install:function(t){t.component("ckeditor",c)},component:c}})(),i=i.default})()));
//# sourceMappingURL=ckeditor.js.map